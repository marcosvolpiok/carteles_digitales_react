(this.webpackJsonpdigital_posters_front=this.webpackJsonpdigital_posters_front||[]).push([[0],{102:function(e,t){},107:function(e,t,n){"use strict";n.r(t);var a=n(1),s=n(2),r=n.n(s),c=n(29),i=n.n(c),o=(n(67),n.p,n(68),n(13)),h=n(5),l=n(3),d=n.n(l),p=n(6),u=n(9),j=n(10),b=n(12),m=n(11),O=n(108),x=n(20).production,f=function(e){Object(b.a)(n,e);var t=Object(m.a)(n);function n(e){var a;return Object(u.a)(this,n),(a=t.call(this,e)).state={token:a.props.cookies.get("token")||"",posters:[]},a}return Object(j.a)(n,[{key:"componentDidMount",value:function(){var e=Object(p.a)(d.a.mark((function e(){var t,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(x.api,"/poster/list"),{method:"GET",headers:{Authorization:"Bearer ".concat(this.state.token)}});case 2:return t=e.sent,e.next=5,t.json();case 5:n=e.sent,this.setState({posters:n}),console.log("poseterssss");case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return Object(a.jsxs)("div",{children:[Object(a.jsx)(o.b,{className:"btn btn-primary",to:"/posters/add",role:"button",children:"Add"}),this.state.posters.length>0&&Object(a.jsx)("div",{children:Object(a.jsxs)("table",{className:"table",children:[Object(a.jsx)("thead",{children:Object(a.jsxs)("tr",{children:[Object(a.jsx)("th",{scope:"col",children:"Name"}),Object(a.jsx)("th",{scope:"col",children:"Actions"})]})}),Object(a.jsx)("tbody",{children:this.state.posters.map((function(e){return Object(a.jsxs)("tr",{children:[Object(a.jsx)("td",{children:e.name}),Object(a.jsxs)("td",{children:[Object(a.jsx)(o.b,{to:"/posters/edit/".concat(e._id),children:"Edit"})," -",Object(a.jsx)(o.b,{to:"/poster/delete/".concat(e._id),children:"Delete"})," -",Object(a.jsx)(o.b,{to:"/poster/watch/".concat(e._id),children:"Link"})]})]},e._id)}))})]})}),0===this.state.posters.length&&Object(a.jsx)("h2",{children:"No such any poster."})]})}}]),n}(r.a.Component),g=Object(O.a)(f),v=n(19),y=n(16),k=(n(32),"development"),C=n(20)[k],w=function(e){Object(b.a)(n,e);var t=Object(m.a)(n);function n(e){var a;return Object(u.a)(this,n),(a=t.call(this,e)).state={loginMessage:"",loginStatus:!1,token:a.props.cookies.get("token")||""},a.handleCookie=function(e){a.props.cookies.set("token",e,{path:"/"})},a.handleInputChange=a.handleInputChange.bind(Object(y.a)(a)),a}return Object(j.a)(n,[{key:"handleInputChange",value:function(e){var t=e.target,n=t.value,a=t.name;this.setState(Object(v.a)({},a,n))}},{key:"handleClick",value:function(){var e=Object(p.a)(d.a.mark((function e(){var t,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(C.api,"/user/login/"),{method:"POST",mode:"cors",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:this.state.user,password:this.state.pwd})});case 2:return t=e.sent,e.next=5,t.json();case 5:n=e.sent,this.setState({loginMessage:n.message}),200===t.status&&(this.setState({loginStatus:!0}),this.handleCookie(n.token),this.props.history.push("/posters/"));case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return Object(a.jsx)("div",{children:Object(a.jsxs)("div",{children:[k," -","production",Object(a.jsx)("h2",{children:"User: 1234@gmail.com"}),Object(a.jsx)("h2",{children:"Password: 1234"}),""!==this.state.loginMessage&&Object(a.jsx)("div",{className:"alert alert-secondary",role:"alert",children:Object(a.jsx)("p",{children:this.state.loginMessage})}),Object(a.jsxs)("div",{className:"form-group",children:[Object(a.jsx)("div",{className:"form-group",children:Object(a.jsx)("input",{type:"text",name:"user",onChange:this.handleInputChange,placeholder:"User"})}),Object(a.jsx)("div",{className:"form-group",children:Object(a.jsx)("input",{type:"password",name:"pwd",onChange:this.handleInputChange,placeholder:"Password"})})]}),Object(a.jsx)("button",{type:"button",className:"btn btn-primary",onClick:function(){return e.handleClick()},children:"Login"}),Object(a.jsx)("p",{children:Object(a.jsx)(o.b,{to:"/register/",children:"Register"})})]})})}}]),n}(r.a.Component),N=Object(O.a)(w),S=n(20).production,I=function(e){Object(b.a)(n,e);var t=Object(m.a)(n);function n(e){var a;return Object(u.a)(this,n),(a=t.call(this,e)).state={registerMessage:"",registerStatus:!1,pwdError:!1},a.handleInputChange=a.handleInputChange.bind(Object(y.a)(a)),a}return Object(j.a)(n,[{key:"handleInputChange",value:function(e){var t=e.target,n=t.value,a=t.name;this.setState(Object(v.a)({},a,n))}},{key:"handleClick",value:function(){var e=Object(p.a)(d.a.mark((function e(){var t,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.setState({pwdError:!1}),this.state.password===this.state.pwd2){e.next=5;break}this.setState({pwdError:!0}),e.next=12;break;case 5:return e.next=7,fetch("".concat(S.api,"/user/signup/"),{method:"POST",mode:"cors",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:this.state.name,email:this.state.email,password:this.state.password})});case 7:return t=e.sent,e.next=10,t.json();case 10:n=e.sent,200===t.status||201===t.status?this.setState({registerStatus:!0}):this.setState({registerMessage:n.message});case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return Object(a.jsxs)("div",{children:[""!==this.state.registerMessage&&Object(a.jsx)("div",{className:"alert alert-secondary",role:"alert",children:Object(a.jsx)("p",{children:this.state.registerMessage})}),!1===this.state.registerStatus&&Object(a.jsxs)("div",{children:[Object(a.jsxs)("div",{className:"form-group",children:[Object(a.jsx)("div",{className:"form-group",children:Object(a.jsx)("input",{type:"text",name:"name",onChange:this.handleInputChange,placeholder:"Name"})}),Object(a.jsx)("div",{className:"form-group",children:Object(a.jsx)("input",{type:"text",name:"email",onChange:this.handleInputChange,placeholder:"E-mail"})}),Object(a.jsx)("div",{className:"form-group",children:!0===this.state.pwdError&&Object(a.jsxs)("div",{class:"alert alert-danger",children:[Object(a.jsx)("strong",{children:"Error!"})," Passwords aren't are equal"]})}),Object(a.jsx)("div",{className:"form-group",children:Object(a.jsx)("input",{type:"password",name:"password",onChange:this.handleInputChange,placeholder:"Password"})}),Object(a.jsx)("div",{className:"form-group",children:Object(a.jsx)("input",{type:"password",name:"pwd2",onChange:this.handleInputChange,placeholder:"Re-entry password"})})]}),Object(a.jsx)("button",{type:"button",className:"btn btn-primary",onClick:function(){return e.handleClick()},children:"Register"})]}),!0===this.state.registerStatus&&Object(a.jsxs)("div",{children:[Object(a.jsx)("h3",{children:"Registered successful"}),Object(a.jsx)("h3",{children:Object(a.jsx)(o.b,{to:"/login/",children:"Login"})})]})]})}}]),n}(r.a.Component),_=n(20).production,M=function(e){Object(b.a)(n,e);var t=Object(m.a)(n);function n(e){var a;return Object(u.a)(this,n),(a=t.call(this,e)).state={token:a.props.cookies.get("token")||""},a.handleInputChange=a.handleInputChange.bind(Object(y.a)(a)),a}return Object(j.a)(n,[{key:"handleInputChange",value:function(e){var t=e.target,n="checkbox"===t.type?t.checked:t.value,a=t.name;this.setState(Object(v.a)({},a,n))}},{key:"handleClick",value:function(){var e=Object(p.a)(d.a.mark((function e(){var t,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Submit!... ",this.state),e.next=3,fetch("".concat(_.api,"/poster/add/"),{method:"POST",mode:"cors",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(this.state.token)},body:JSON.stringify({name:this.state.name,init_time:this.state.init_time,end_time:this.state.end_time})});case 3:return t=e.sent,console.log(t),e.next=7,t.json();case 7:n=e.sent,this.props.history.push("/posters/addImage/".concat(n._id));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return Object(a.jsxs)("div",{children:[Object(a.jsx)("h1",{children:"Add poster"}),Object(a.jsx)("form",{children:Object(a.jsx)("div",{className:"card",children:Object(a.jsxs)("div",{className:"card-body",children:[Object(a.jsx)("p",{className:"card-text",children:Object(a.jsx)("input",{type:"text",onChange:this.handleInputChange,name:"name",placeholder:"Name"})}),Object(a.jsxs)("p",{className:"card-text",children:["Init: ",Object(a.jsx)("input",{type:"time",onChange:this.handleInputChange,name:"init_time",placeholder:"Init"})]}),Object(a.jsxs)("p",{className:"card-text",children:["End: ",Object(a.jsx)("input",{type:"time",onChange:this.handleInputChange,name:"end_time",placeholder:"End"})]}),Object(a.jsx)("button",{type:"button",className:"btn btn-primary",onClick:function(){return e.handleClick()},children:"Next"})]})})})]})}}]),n}(r.a.Component),A=Object(O.a)(M),T=n(41),E=n(42),D=n(40),P=n(20).production,B=function(e){Object(b.a)(n,e);var t=Object(m.a)(n);function n(e){var a;return Object(u.a)(this,n),(a=t.call(this,e)).state={token:a.props.cookies.get("token")||"",poster:{},id:a.props.match.params.id,image:null},a.filterBySize=function(e){return e.size<=5242880},a.handleInputChange=a.handleInputChange.bind(Object(y.a)(a)),a}return Object(j.a)(n,[{key:"componentDidMount",value:function(){var e=Object(p.a)(d.a.mark((function e(){var t,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(P.api,"/poster/").concat(this.state.id),{method:"GET",mode:"cors",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(this.state.token)}});case 2:return t=e.sent,e.next=5,t.json();case 5:n=e.sent,this.setState({poster:n}),console.log(n);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"handleInputChange",value:function(e){var t=e.target,n="checkbox"===t.type?t.checked:t.value,a=t.name;this.setState(Object(v.a)({},a,n))}},{key:"handleClick",value:function(){var e=Object(p.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Submit!... ",this.state),e.next=3,fetch("".concat(P.api,"/poster/update/").concat(this.state.id),{method:"POST",mode:"cors",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(this.state.token)},body:JSON.stringify({name:this.state.name,init_time:this.state.init_time,end_time:this.state.end_time})});case 3:t=e.sent,console.log(t),this.props.history.push("/posters/addImage/".concat(this.state.id));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state.poster;return Object(a.jsxs)("div",{children:[t._id&&Object(a.jsx)("form",{children:Object(a.jsx)("div",{className:"card",children:Object(a.jsxs)("div",{className:"card-body",children:[Object(a.jsx)("p",{className:"card-text",children:Object(a.jsx)("input",{type:"text",defaultValue:t.name,onChange:this.handleInputChange,name:"name",placeholder:"Name"})}),Object(a.jsxs)("p",{className:"card-text",children:["Init: ",Object(a.jsx)("input",{type:"time",onChange:this.handleInputChange,name:"init_time",defaultValue:t.init_time})]}),Object(a.jsxs)("p",{className:"card-text",children:["End: ",Object(a.jsx)("input",{type:"time",onChange:this.handleInputChange,name:"end_time",defaultValue:t.end_time})]}),Object(a.jsx)("button",{type:"button",className:"btn btn-primary",onClick:function(){return e.handleClick()},children:"Next"})]})},t._id)}),!t._id&&Object(a.jsx)("h2",{children:"No such any poster."})]})}}]),n}(r.a.Component),z=Object(O.a)(B),Y=n(20).production,H=function(e){Object(b.a)(n,e);var t=Object(m.a)(n);function n(){var e;Object(u.a)(this,n);for(var a=arguments.length,s=new Array(a),r=0;r<a;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).state={poster:[],id:e.props.match.params.id},e}return Object(j.a)(n,[{key:"componentDidMount",value:function(){var e=Object(p.a)(d.a.mark((function e(){var t,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(Y.api,"/poster/").concat(this.state.id),{method:"GET",mode:"cors",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(this.state.token)}});case 2:return t=e.sent,e.next=5,t.json();case 5:n=e.sent,this.setState({poster:n});case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"handleClick",value:function(){var e=Object(p.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Submit!... ",this.state),e.next=3,fetch("".concat(Y.api,"/poster/remove/").concat(this.state.id),{method:"DELETE",mode:"cors",headers:{"Content-Type":"application/json"}});case 3:t=e.sent,console.log(t),this.props.history.push("/posters/");case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return Object(a.jsx)("div",{children:Object(a.jsx)("form",{children:Object.keys(this.state.poster).length&&Object(a.jsx)("div",{className:"card",children:Object(a.jsxs)("div",{className:"card-body",children:[Object(a.jsx)("h1",{children:this.state.poster.name}),Object(a.jsx)("p",{children:"Do you want to delete this poster?"}),Object(a.jsx)("button",{type:"button",className:"btn btn-danger",onClick:function(){return e.handleClick()},children:"Delete"})]})},this.state.poster._id)})})}}]),n}(r.a.Component),J=n(20).production,F=function(e){Object(b.a)(n,e);var t=Object(m.a)(n);function n(e){var a;return Object(u.a)(this,n),(a=t.call(this,e)).state={token:a.props.cookies.get("token")||"",image:null,poster:{},id:a.props.match.params.id},a.filterBySize=function(e){return e.size<=5242880},a.handleInputChange=a.handleInputChange.bind(Object(y.a)(a)),a}return Object(j.a)(n,[{key:"handleInputChange",value:function(e){var t=e.target,n="checkbox"===t.type?t.checked:t.value,a=t.name;this.setState(Object(v.a)({},a,n))}},{key:"handleClick",value:function(){var e=Object(p.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Submit!... ",this.state),e.next=3,fetch("".concat(J.api,"/poster/addImage/"),{method:"POST",mode:"cors",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(this.state.token)},body:JSON.stringify({name:this.state.name})});case 3:t=e.sent,console.log(t),this.props.history.push("/posters/");case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){var e=Object(p.a)(d.a.mark((function e(){var t,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(J.api,"/poster/").concat(this.state.id),{method:"GET",mode:"cors",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(this.state.token)}});case 2:return t=e.sent,e.next=5,t.json();case 5:n=e.sent,console.log(n),this.setState({poster:n});case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return Object(a.jsxs)("div",{children:[Object(a.jsx)("h1",{children:"Add image"}),Object(a.jsx)("form",{children:Object(a.jsx)("div",{className:"card",children:Object(a.jsxs)("div",{className:"card-body",children:[this.state.poster.file_path&&Object(a.jsxs)("div",{children:[Object(a.jsx)("p",{children:"Original imagen:"}),Object(a.jsx)("img",{src:"".concat(J.static_files_url).concat(this.state.poster.file_path),alt:"Original image"})]}),Object(a.jsx)("h3",{children:"Change image"}),Object(a.jsxs)(T.a,{destination:{headers:{Authorization:"Bearer ".concat(this.state.token)},url:"".concat(J.api,"/poster/addImage"),sendWithFormData:!0,params:{id:this.state.id}},fileFilter:this.filterBySize,accept:"image/*",children:[Object(a.jsx)(E.a,{}),Object(a.jsx)(D.a,{})]})]})})})]})}}]),n}(r.a.Component),L=Object(O.a)(F),G=n(74),R=n(106),U=n(20).production,V=function(e){Object(b.a)(n,e);var t=Object(m.a)(n);function n(e){var a;return Object(u.a)(this,n),(a=t.call(this,e)).state={id:a.props.match.params.id,posterImage:null},a.socket=G("".concat(U.api),{}),a.connectSocket(),a}return Object(j.a)(n,[{key:"connectSocket",value:function(){this.socket.on("action",function(){console.log("lleg\xf3 msg action"),this.searchPosters()}.bind(this))}},{key:"handleClick",value:function(e){console.log("cambiando accion... ","xxxxxx"),this.socket.emit("action","xxxxx")}},{key:"componentDidMount",value:function(){var e=Object(p.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.searchPosters();case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"searchPosters",value:function(){var e=Object(p.a)(d.a.mark((function e(){var t,n,a=this;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(U.api,"/poster/listByUserId/").concat(this.state.id),{method:"GET",mode:"cors",headers:{"Content-Type":"application/json"}});case 2:return t=e.sent,e.next=5,t.json();case 5:n=e.sent,this.setState({poster:n}),console.log("llego posterrrrrrrrr",n),this.changePhoto(n),setInterval((function(){a.changePhoto(n)}),1e3);case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"changePhoto",value:function(e){var t=this;console.log("checkea cambio de foto"),e.forEach((function(e){var n=R("2000-01-01 "+R().format("HH")+":"+R().format("MM")+":"+R().format("ss")).format("YYYY-MM-DD HH:MM:ss"),a=R("2000-01-01 "+e.init_time).format("YYYY-MM-DD HH:MM:ss"),s=R("2000-01-01 "+e.end_time).format("YYYY-MM-DD HH:MM:ss");console.log("poster.init_timeposter.init_timeposter.init_time",e.init_time),a<=n&&n<=s&&(console.log("************* MUESTRAAAAAAAAAAAAA ",e.name),console.log(a,s,n),t.setState({posterImage:e.file_path})),console.log(a,s,n)}))}},{key:"render",value:function(){return Object(a.jsx)("div",{children:Object(a.jsx)("img",{src:"".concat(U.api,"/")+this.state.posterImage})})}}]),n}(r.a.Component);var q=function(){return Object(a.jsx)("div",{children:Object(a.jsx)(o.a,{children:Object(a.jsxs)(h.c,{children:[Object(a.jsx)(h.a,{exact:!0,path:"/posters",component:g}),Object(a.jsx)(h.a,{exact:!0,path:"/login",component:N}),Object(a.jsx)(h.a,{exact:!0,path:"/register",component:I}),Object(a.jsx)(h.a,{exact:!0,path:"/posters/add",component:A}),Object(a.jsx)(h.a,{exact:!0,path:"/posters/addImage/:id",component:L}),Object(a.jsx)(h.a,{exact:!0,path:"/posters/edit/:id",component:z}),Object(a.jsx)(h.a,{exact:!0,path:"/poster/delete/:id",component:H}),Object(a.jsx)(h.a,{exact:!0,path:"/poster/watch/:id",component:V})]})})})},W=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,109)).then((function(t){var n=t.getCLS,a=t.getFID,s=t.getFCP,r=t.getLCP,c=t.getTTFB;n(e),a(e),s(e),r(e),c(e)}))};i.a.render(Object(a.jsx)(r.a.StrictMode,{children:Object(a.jsx)(q,{})}),document.getElementById("root")),W()},20:function(e){e.exports=JSON.parse('{"development":{"api":"http://localhost:3050","static_files_url":"http://localhost:3050/"},"production":{"api":"https://digitalpostersbackend.herokuapp.com/","static_files_url":"https://digitalpostersbackend.herokuapp.com//"}}')},67:function(e,t,n){},68:function(e,t,n){}},[[107,1,2]]]);
//# sourceMappingURL=main.b500a010.chunk.js.map